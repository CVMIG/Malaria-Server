<!DOCTYPE html>
<html>
	<head>
		<title>Visualization</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- Bootstrap -->
		<link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">
		<!-- Responsive -->
        <!--
		<link href="/static/css/bootstrap-responsive.css" rel="stylesheet">
        -->
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
        <script>
            var list1 = [{% for i in list1 %}new google.maps.LatLng({{i}}){% if loop.index0 != (loop.length-1) %},{% endif %}{% endfor %}]
            var list2 = [{% for i in list2 %}new google.maps.LatLng({{i}}){% if loop.index0 != (loop.length-1) %},{% endif %}{% endfor %}]
            var list3 = [{% for i in list3 %}new google.maps.LatLng({{i}}){% if loop.index0 != (loop.length-1) %},{% endif %}{% endfor %}]
            var list4 = [{% for i in list4 %}new google.maps.LatLng({{i}}){% if loop.index0 != (loop.length-1) %},{% endif %}{% endfor %}]
            function initialize() {
              var myLatlng = new google.maps.LatLng({{lat}},{{lng}});
              var mapOptions = {
                zoom: {{zoom}},
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              }
              var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

              function addMarker(latLng) {
                    return new google.maps.Marker({
                    position: latLng,
                    map: map
                  });
              }
              for (var i=0; i<list1.length; i++){list1[i] = addMarker(list1[i])}
              for (var i=0; i<list2.length; i++){list2[i] = addMarker(list2[i])}
              for (var i=0; i<list3.length; i++){list3[i] = addMarker(list3[i])}
              for (var i=0; i<list4.length; i++){list4[i] = addMarker(list4[i])}
              
              var filter = document.getElementById('filter')
              map.controls[google.maps.ControlPosition.RIGHT_TOP].push(filter);
            }
            google.maps.event.addDomListener(window, 'load', initialize);
            var show1 = true, show2 = true, show3 = true, show4 = true
            function triggerMarker(x)
              {
                if(x==1) {
                    show1 = !show1;
                    for (var i=0; i<list1.length; i++){list1[i].setVisible(show1)}
                }
                else if(x==2) {
                    show2 = !show2;
                    for (var i=0; i<list2.length; i++){list2[i].setVisible(show2)}
                }
                else if(x==3) {
                    show3 = !show3;
                    for (var i=0; i<list3.length; i++){list3[i].setVisible(show3)}
                }
                else if(x==4) {
                    show4 = !show4;
                    for (var i=0; i<list4.length; i++){list4[i].setVisible(show4)}
                }
              }
        </script>
		<style>
		html, body {
			height: 100%;
			overflow: hidden;
			margin: 0 0 0;
		}
        #filter { 
        background-color: transparent; 
        right: 20px;
        width: 96px;
        background: white; 
        border: 1px solid;
        border-color: #999999;
        padding: 5px;
        padding-left: 7px;
        padding-bottom: 3px;
        margin-right: 5px;
        -webkit-box-shadow: -5px 7px 6px -6px #0F0F0F;
	    -moz-box-shadow: -5px 7px 6px -6px #0F0F0F;
        box-shadow: -5px 7px 6px -6px #0F0F0F;
        }
        #checkbox{
            margin-bottom: 5px;
        }
		</style>
	</head>
	<body>
		<div class="navbar" style="width: 100%;">
			<div class="navbar-inner">
				<div>
				<!--
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				</a>
					<div class="nav-collapse collapse">
                    -->
                    <div>
					<ul class="nav pull-left">
						<li><a href="/dashboard"><i class="icon-tasks"></i> Summary</a></li>
						<li><a href="/records"><i class="icon-book"></i> Records</a></li>
						<li class="active"><a href="#"><i class="icon-globe"></i> Visualization</a></li>
					</ul>
					
					<ul class="nav pull-right">
						<li>&nbsp </li>
						<li><a href="/index">Logout <i class="icon-off"></i></a></li>
					</ul>
					</div>
				</div>
			</div>
		</div>
        
		<!--
		<div class="container" style="height: 100%; width: 100%; margin: -20px 0 0;">
			<iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com.ph/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=philippines&amp;aq=&amp;sll=37.0625,-95.677068&amp;sspn=57.815136,114.169922&amp;ie=UTF8&amp;hq=&amp;hnear=Philippines&amp;t=m&amp;ll=10.422988,120.629883&amp;spn=8.291273,11.260986&amp;z=7&amp;output=embed"></iframe>
		</div>
        -->
        <div id="map-canvas" class="google-maps" style="height: 100%; width: 100%; margin: -20px 0 0;"></div>

        <div id="filter">
        <input id="checkbox" type="checkbox" onclick="triggerMarker(1);" checked> Falciparum<br>
        <input id="checkbox" type="checkbox" onclick="triggerMarker(2);" checked> Vivax<br>
        <input id="checkbox" type="checkbox" onclick="triggerMarker(3);" checked> Malariae<br>
        <input id="checkbox" type="checkbox" onclick="triggerMarker(4);" checked> Ovale<br>
        </div>
		<script src="/static/js/jquery.js"></script>
		<script src="/static/js/bootstrap.min.js"></script>
	</body>
</html>